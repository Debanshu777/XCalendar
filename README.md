# XCalendar ğŸ“…

A modern, cross-platform calendar application built with **Kotlin Multiplatform** and **Compose Multiplatform**, supporting **Android**, **iOS**, and **Desktop** (Windows, macOS, Linux). Features Material 3 Expressive design, multiple calendar views, event management, and holiday integration.

## ğŸ¯ What is XCalendar?

XCalendar is a feature-rich calendar application that provides multiple viewing modes (day, week, month, 3-day, and schedule views) with seamless event management capabilities. Built using modern Kotlin Multiplatform development practices, it offers a native experience across Android, iOS, and Desktop platforms.

## ğŸ“± Screenshots & Demo

### **App Overview**
| Android | iOS | Desktop                                                                                                                                  |
|---------|-----|------------------------------------------------------------------------------------------------------------------------------------------|
|<img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android.gif" width="200" height="400" alt="Android Demo"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios.gif" width="200" height="400" alt="iOS Demo"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop.gif" width="400" height="400" alt="Desktop Demo"> |

### **Calendar Views**
| View | Android | iOS | Desktop |
|------|---------|-----|---------|
| **Month View** | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android_month.png" width="200" height="400" alt="Android Month"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios_month.png" width="200" height="400" alt="iOS Month"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop_month.png" width="600" height="400" alt="Desktop Month"> |
| **Week View** | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android_week.png" width="200" height="400" alt="Android Week"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios_week.png" width="200" height="400" alt="iOS Week"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop_week.png" width="600" height="400" alt="Desktop Week"> |
| **Day View** | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android_day.png" width="200" height="400" alt="Android Day"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios_day.png" width="200" height="400" alt="iOS Day"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop_day.png" width="600" height="400" alt="Desktop Day"> |
| **3-Day View** | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android_three_day.png" width="200" height="400" alt="Android 3-Day"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios_three_day.png" width="200" height="400" alt="iOS 3-Day"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop_three_day.png" width="600" height="400" alt="Desktop 3-Day"> |
| **Schedule View** | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android_schedule.png" width="200" height="400" alt="Android Schedule"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios_schedule.png" width="200" height="400" alt="iOS Schedule"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop_schedule.png" width="600" height="400" alt="Desktop Schedule"> |

### **Event Management**
| Feature | Android | iOS | Desktop |
|---------|---------|-----|---------|
| **Add Event** | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android_add_event.png" width="200" height="400" alt="Android Add Event"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios_add_event.png" width="200" height="400" alt="iOS Add Event"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop_add_event.png" width="600" height="400" alt="Desktop Add Event"> |
| **View Event** | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android_view_event.png" width="200" height="400" alt="Android View Event"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios_view_event.png" width="200" height="400" alt="iOS View Event"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop_view_event.png" width="600" height="400" alt="Desktop View Event"> |

### **Navigation & UI**
### **App Bar** 
| Android | iOS | Desktop |
|---------|-----|---------|
| <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/android_app_bar.png" width="200" height="400" alt="Android App Bar"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/ios_app_bar.png" width="200" height="400" alt="iOS App Bar"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/desktop_app_bar.png" width="600" height="400" alt="Desktop App Bar"> |

### **Bottom Bar**
| Static | Animated |
|--------|----------|
| <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/bottom_bar.png" width="400" alt="Bottom Bar"> | <img src="https://github.com/Debanshu777/XCalendar/raw/main/assets/screenshots/bottom_bar_gif.gif" width="400" alt="Bottom Bar Animation"> |

## âœ¨ Key Features

- **Multiple Calendar Views**
  - ğŸ“… Month View - Traditional monthly calendar layout
  - ğŸ“† Week View - 7-day weekly schedule
  - ğŸ“‹ Day View - Detailed single-day view
  - ğŸ“Š 3-Day View - Compact 3-day overview
  - ğŸ“ Schedule View - List-based event schedule with infinite scroll

- **Cross-Platform Support**
  - ğŸ¤– Android (API 30+)
  - ğŸ iOS (arm64, x64, Simulator)
  - ğŸ–¥ï¸ Desktop (Windows, macOS, Linux)

- **Event Management**
  - â• Create, edit, and delete events
  - ğŸ¨ Multiple calendar support (Personal, Work, Family, Birthdays, Gym)
  - â° Event reminders and notifications
  - ğŸ”„ Recurring event support (daily, weekly, monthly, yearly)
  - ğŸ“ Location-based events
  - ğŸŒ All-day event support

- **Calendar Integration**
  - ğŸ‘¥ Multi-user support
  - ğŸ¯ Primary and secondary calendar management
  - ğŸ‘ï¸ Calendar visibility controls
  - ğŸ¨ Color-coded calendar categories

- **Holiday Support**
  - ğŸ›ï¸ Built-in holiday data (currently supports India)
  - ğŸ“… Holiday display across all views
  - ğŸŒ Calendarific API integration for live data

- **Modern UI/UX**
  - ğŸ¨ Material Design 3 Expressive implementation
  - ğŸŒˆ Dynamic color theming with MaterialKolor
  - âœ¨ Expressive motion animations
  - ğŸ“ Responsive adaptive layouts
  - ğŸ‘† Smooth gesture-based navigation
  - ğŸ“± Native platform integration
  - ğŸŒ“ Automatic dark/light theme (follows system)

## ğŸ—ï¸ Architecture & Technical Stack

### **Technology Stack**

| Category | Technology | Version |
|----------|------------|---------|
| **Language** | Kotlin | 2.3.0 |
| **UI Framework** | Compose Multiplatform | 1.10.0-rc02 |
| **UI Design** | Material 3 Expressive | 1.10.0-alpha05 |
| **Database** | Room | 2.8.4 |
| **SQLite** | SQLite Bundled | 2.6.2 |
| **Networking** | Ktor Client | 3.3.3 |
| **DI Framework** | Koin | 4.1.1 |
| **DI Compiler** | Koin KSP | 2.3.1 |
| **Navigation** | Navigation3 | 1.0.0-alpha06 |
| **Date/Time** | kotlinx-datetime | 0.7.1 |
| **Image Loading** | Landscapist Coil3 | 2.8.2 |
| **Dynamic Colors** | MaterialKolor | 4.0.5 |
| **Caching** | Store5 | 5.1.0-alpha07 |
| **Adaptive UI** | Compose Adaptive | 1.3.0-alpha03 |
| **Build Config** | BuildKonfig | 0.17.1 |
| **Collections** | kotlinx-collections-immutable | 0.4.0 |
| **Logging** | Kermit | 2.0.8 |
| **Build System** | Gradle (AGP) | 8.13.2 |
| **Android SDK** | Compile/Target SDK | 36 |

### **Platform-Specific Dependencies**

| Platform | HTTP Client | Additional |
|----------|-------------|------------|
| Android | Ktor OkHttp | Koin Android, Activity Compose 1.12.2 |
| iOS | Ktor Darwin | - |
| Desktop | Ktor OkHttp | Kotlinx Coroutines Swing 1.10.2 |

### **Project Structure**

```
XCalendar/
â”œâ”€â”€ ğŸ“ assets/                          # Static data & screenshots
â”‚   â”œâ”€â”€ calendars.json                  # Calendar categories
â”‚   â”œâ”€â”€ events.json                     # Sample events
â”‚   â””â”€â”€ screenshots/                    # README images
â”œâ”€â”€ ğŸ“ composeApp/
â”‚   â”œâ”€â”€ build.gradle.kts                # Module configuration
â”‚   â”œâ”€â”€ schemas/                        # Room database schemas
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ ğŸ“ commonMain/kotlin/com/debanshu/xcalendar/
â”‚       â”‚   â”œâ”€â”€ CalendarApp.kt          # Main app composable
â”‚       â”‚   â”œâ”€â”€ common/                 # Extensions, utilities, mappers, logging
â”‚       â”‚   â”œâ”€â”€ data/
â”‚       â”‚   â”‚   â”œâ”€â”€ localDataSource/    # Room DB, DAOs, entities
â”‚       â”‚   â”‚   â”œâ”€â”€ remoteDataSource/   # Ktor APIs, models, error handling
â”‚       â”‚   â”‚   â””â”€â”€ store/              # Store5 caching layer
â”‚       â”‚   â”œâ”€â”€ di/                     # Koin DI modules
â”‚       â”‚   â”œâ”€â”€ domain/
â”‚       â”‚   â”‚   â”œâ”€â”€ model/              # Domain models
â”‚       â”‚   â”‚   â”œâ”€â”€ repository/         # Data repositories
â”‚       â”‚   â”‚   â”œâ”€â”€ states/             # UI state management
â”‚       â”‚   â”‚   â”œâ”€â”€ usecase/            # Use cases (calendar, event, holiday, user)
â”‚       â”‚   â”‚   â””â”€â”€ util/               # Domain utilities & error mapping
â”‚       â”‚   â””â”€â”€ ui/
â”‚       â”‚       â”œâ”€â”€ CalendarViewModel.kt
â”‚       â”‚       â”œâ”€â”€ components/         # Reusable UI components
â”‚       â”‚       â”œâ”€â”€ navigation/         # Navigation3 setup
â”‚       â”‚       â”œâ”€â”€ screen/             # Calendar view screens
â”‚       â”‚       â”œâ”€â”€ state/              # State holders (Date, Schedule)
â”‚       â”‚       â”œâ”€â”€ theme/              # Material3 Expressive theme
â”‚       â”‚       â”œâ”€â”€ transition/         # Shared element transitions
â”‚       â”‚       â”œâ”€â”€ utils/              # UI utilities & formatters
â”‚       â”‚       â””â”€â”€ viewmodel/          # Feature-specific ViewModels
â”‚       â”œâ”€â”€ ğŸ“ androidMain/             # Android-specific code
â”‚       â”œâ”€â”€ ğŸ“ iosMain/                 # iOS-specific code
â”‚       â””â”€â”€ ğŸ“ desktopMain/             # Desktop-specific code
â”œâ”€â”€ ğŸ“ iosApp/                          # iOS Xcode project
â”œâ”€â”€ ğŸ“ gradle/
â”‚   â””â”€â”€ libs.versions.toml              # Version catalog
â””â”€â”€ local.properties                    # API keys (gitignored)
```

### **Data Models**

**Event** - Calendar events with full scheduling support

```kotlin
data class Event(
    val id: String,
    val calendarId: String,
    val calendarName: String,
    val title: String,
    val description: String?,
    val location: String?,
    val startTime: Long,           // Epoch milliseconds
    val endTime: Long,
    val isAllDay: Boolean,
    val isRecurring: Boolean,
    val recurringRule: String?,    // iCal RRULE format
    val reminderMinutes: List<Int>,
    val color: Int                 // ARGB color
)
```

**Calendar** - User calendar categories

```kotlin
data class Calendar(
    val id: String,
    val name: String,
    val color: Int,
    val userId: String,
    val isVisible: Boolean,
    val isPrimary: Boolean
)
```

**Holiday** - Regional holiday information

```kotlin
data class Holiday(
    val id: String,
    val name: String,
    val date: Long,
    val countryCode: String
)
```

### **Database Schema**

| Entity | Table | Foreign Key |
|--------|-------|-------------|
| UserEntity | users | - |
| CalendarEntity | calendars | users.id |
| EventEntity | events | calendars.id (CASCADE) |
| EventReminderEntity | event_reminders | events.id |
| HolidayEntity | holidays | - |
| SyncFailureEntity | sync_failures | - |

**Storage Locations:**
- **Android**: `app_data/databases/calendar.db`
- **iOS**: `Documents/calendar.db`
- **Desktop**:
  - Windows: `%APPDATA%/XCalendar/calendar.db`
  - macOS: `~/Library/Application Support/XCalendar/calendar.db`
  - Linux: `~/.local/share/XCalendar/calendar.db`

### **Data Sources**

- **Static Data**: Events and calendars served from `assets/` directory
- **Dynamic Data**: Holiday information fetched from Calendarific API (when API key is configured)
- **Local Storage**: Room database for offline data persistence
- **API Integration**: Ktor client for remote data fetching
- **Caching Layer**: Store5 for efficient data caching with bookkeeping
- **Logging**: Kermit multiplatform logging for debugging

### **Key Components**

- **SwipeablePager**: Gesture-based navigation for calendar views
- **SwipeableCalendarView**: Interactive calendar with swipe gestures
- **BaseCalendarScreen**: Shared screen for Day/Week/3-Day views
- **CalendarBottomNavigationBar**: View switcher with FAB for adding events
- **ScheduleStateHolder**: Infinite scroll pagination for schedule view
- **Modal Bottom Sheets**: Add/Edit event dialogs
- **EventViewModel**: Feature-specific ViewModel for event operations
- **Store5 Caching**: Event and Holiday stores with bookkeeping and validation
- **Use Cases**: Clean architecture use cases for calendar, event, holiday, and user operations

## ğŸš€ Getting Started

### **Prerequisites**

- **JDK 23** (required for JVM target 23)
- **Android Studio Ladybug** (2024.2.1) or later
- **Kotlin 2.3.0+**
- **Xcode 15+** (for iOS builds, macOS only)

### **Installation**

1. **Clone the repository**
   ```bash
   git clone https://github.com/Debanshu777/XCalendar.git
   cd XCalendar
   ```

2. **Configure API Key (Optional)**
   
   For live holiday data, add to `local.properties`:
   ```properties
   API_KEY=your_calendarific_api_key
   ```
   Get a free API key at [Calendarific](https://calendarific.com)
   
   > **Note:** API key works across all platforms (Android, iOS, Desktop) via BuildKonfig

3. **Open in Android Studio**
   - Open the project in Android Studio
   - Sync Gradle files
   - Wait for dependencies to download

### **Build Commands**

**Android:**
```bash
# Build debug APK
./gradlew :composeApp:assembleDebug

# Install on connected device
./gradlew :composeApp:installDebug
```

**iOS (macOS only):**
```bash
# Build framework for simulator
./gradlew :composeApp:linkDebugFrameworkIosSimulatorArm64

# Build framework for device
./gradlew :composeApp:linkDebugFrameworkIosArm64
```
Then open `iosApp/iosApp.xcodeproj` in Xcode and run.

**Desktop:**
```bash
# Run directly
./gradlew :composeApp:run

# Build executable JAR
./gradlew :composeApp:desktopJar

# Package for distribution
./gradlew :composeApp:packageDmg    # macOS (.dmg)
./gradlew :composeApp:packageMsi    # Windows (.msi)
./gradlew :composeApp:packageDeb    # Linux (.deb)
```

**Clean build:**
```bash
./gradlew clean
```

## ğŸ“± App Flow & Navigation

### **Navigation Structure**

The app uses **Navigation3** for type-safe navigation:

```
CalendarApp (Main Container)
â”œâ”€â”€ CalendarTopAppBar
â”‚   â”œâ”€â”€ Month/Year Title (expandable)
â”‚   â”œâ”€â”€ Search Button
â”‚   â”œâ”€â”€ Today Button
â”‚   â””â”€â”€ User Avatar
â”œâ”€â”€ NavigationHost (Content Area)
â”‚   â”œâ”€â”€ MonthScreen (default)
â”‚   â”œâ”€â”€ WeekScreen
â”‚   â”œâ”€â”€ DayScreen
â”‚   â”œâ”€â”€ ThreeDayScreen
â”‚   â””â”€â”€ ScheduleScreen
â”œâ”€â”€ CalendarBottomNavigationBar
â”‚   â”œâ”€â”€ View Selector Icons
â”‚   â””â”€â”€ Add Event FAB
â””â”€â”€ Modal Bottom Sheets
    â”œâ”€â”€ AddEventDialog
    â””â”€â”€ EventDetailsDialog
```

### **Screen Interactions**

- **Month View**: Tap dates to navigate to day view, swipe to change months
- **Week/Day/3-Day Views**: Tap events for details, swipe to navigate between dates
- **Schedule View**: Infinite scroll with month/week headers and event grouping
- **Bottom Navigation**: Switch calendar views, add events via FAB
- **Top App Bar**: Expand for mini calendar, tap date badge to go to today

### **State Management**

| Component | Purpose |
|-----------|---------|
| `CalendarViewModel` | Main UI state, calendar and user operations |
| `EventViewModel` | Event CRUD operations and state |
| `DateStateHolder` | Current date, selected date, view month |
| `ScheduleStateHolder` | Infinite scroll pagination |
| `CalendarUiState` | Immutable state snapshot |

**Data Flow:**
```
Data Sources (Room + Ktor API)
       â†“ Store5 (caching + bookkeeping)
Repository (domain mapping)
       â†“ Flow<List<T>>
Use Cases (business logic)
       â†“ Flow<List<T>>
ViewModel (combine, debounce)
       â†“ StateFlow<CalendarUiState>
UI Composables (collectAsState)
```

## ğŸ”§ Configuration & Customization

### **Calendar Categories**

The app comes with pre-configured calendar categories:
- **Personal**: Personal events and appointments
- **Work**: Professional meetings and deadlines
- **Family**: Family-related events
- **Birthdays**: Birthday reminders and celebrations
- **Gym**: Fitness and workout schedules

### **Holiday Integration**

- **API**: [Calendarific](https://calendarific.com) (free tier available)
- **Region**: India (IN) - more regions planned
- **Storage**: Room database with offline caching
- **Fallback**: Static data when API unavailable
- **Configuration**: Add `API_KEY` to `local.properties`

### **Event Features**

- **Reminders**: Multiple reminder options (15min, 30min, 1hr, 1day, 1week)
- **Recurring Events**: Support for daily, weekly, monthly, and yearly patterns (iCal RRULE format)
- **Location**: Optional location information for events
- **All-day Events**: Mark events that span entire days

## ğŸ§ª Testing

The project includes comprehensive testing infrastructure:
- **Test Tags**: UI components tagged for automated testing
- **State Testing**: ViewModel and state management testing
- **Component Testing**: Individual UI component testing

## ğŸ“Š Performance Features

- **Lazy Loading**: Efficient event loading with LazyColumn/LazyVerticalGrid
- **Infinite Pagination**: Schedule view loads data as you scroll
- **State Optimization**: 
  - `distinctUntilChanged()` prevents redundant updates
  - `debounce(30ms)` batches rapid state changes
  - `ImmutableList` for stable recomposition
- **Flow Sharing**: `shareIn(WhileSubscribed(5000))` for efficient data sharing
- **Compose Stability**: Configuration via `stability_config.conf`
- **Memory Management**: Scoped coroutines with proper lifecycle handling

## ğŸ”® Future Enhancements

- [ ] Calendar sync with Google Calendar, Outlook
- [ ] Push notifications for reminders
- [x] Dark/Light theme switching
- [x] Desktop application support
- [ ] Custom calendar colors
- [ ] Event sharing capabilities
- [ ] Multi-language support
- [ ] Widget support (Android/iOS)
- [ ] Real-time calendar sync
- [ ] Multiple holiday region support
- [ ] Web application support

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

### **Development Guidelines**

- Follow Kotlin coding conventions
- Use Compose best practices
- Maintain clean architecture principles
- Add appropriate test coverage

### **API Integration Notes**

- **Static Data**: Events and calendars are currently served from `assets/` directory
- **API Layer**: Remote data sources can be modified to integrate with actual calendar APIs
- **Holiday API**: Requires API key in `local.properties` for live holiday data
- **Fallback Strategy**: App gracefully falls back to static data when API is unavailable

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- Built with [Kotlin Multiplatform](https://kotlinlang.org/docs/multiplatform.html)
- UI powered by [Compose Multiplatform](https://www.jetbrains.com/lp/compose-multiplatform/)
- Material 3 Expressive Design
- Database management with [Room](https://developer.android.com/training/data-storage/room)
- Dependency injection using [Koin](https://insert-koin.io/)
- Dynamic theming with [MaterialKolor](https://github.com/jordond/MaterialKolor)
- Holiday data from [Calendarific](https://calendarific.com)
- Navigation with [Navigation3](https://developer.android.com/jetpack/androidx/releases/navigation3)
- Caching with [Store5](https://github.com/MobileNativeFoundation/Store)
- Logging with [Kermit](https://github.com/touchlab/Kermit)

---

**XCalendar** - Modern calendar experience across platforms ğŸ“±ğŸ–¥ï¸ğŸ’»
